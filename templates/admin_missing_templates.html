{% extends "base.html" %}
{% block title %}Missing template files{% endblock %}

{% block content %}
<div class="container my-4">
  <h3>Missing template images</h3>
  <p class="text-muted">Templates whose base image file is missing on disk. Use the Upload button to re-upload the image for that template.</p>

  {% if missing %}
    <div class="row">
      {% for m in missing %}
        <div class="col-md-6">
          <div class="card mb-3">
            <div class="card-body">
              <h5>{{ m.name }} <small class="text-muted">(#{{ m.id }})</small></h5>
              <p class="small">Expected path: <code>{{ m.image_path }}</code></p>
              <form method="post" action="{{ url_for('admin_restore_template_image', template_id=m.id) }}" enctype="multipart/form-data">
                <div class="mb-2">
                  <input type="file" name="image" accept="image/png,image/jpeg" required />
                </div>
                <button class="btn btn-primary btn-sm">Upload & Replace</button>
              </form>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-success">No missing template images detected.</div>
  {% endif %}
</div>
{% endblock %}



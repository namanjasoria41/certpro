<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{% block title %}Banner Hub{% endblock %}</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&display=swap" rel="stylesheet">

{% block extra_css %}{% endblock %}

<style>
:root {
  --bg-main: linear-gradient(135deg,#0f0626,#1b0f3a,#0b1b2e);
  --glass-bg: rgba(255,255,255,.08);
  --glass-border: rgba(255,255,255,.15);
  --primary: #6f5cff;
  --accent: #00ffd5;
  --text-main: #eaeaf0;
  --text-muted: #a8a8c7;
}

body {
  margin: 0;
  background: var(--bg-main);
  color: var(--text-main);
  font-family: Inter, system-ui, sans-serif;
}

/* NAVBAR */
.navbar {
  background: rgba(10,5,30,.9);
  backdrop-filter: blur(16px);
  border-bottom: 1px solid var(--glass-border);
}

/* SIDEBAR */
.sidebar {
  position: fixed;
  top: 0;
  left: -260px;
  width: 260px;
  height: 100vh;
  background: rgba(10,5,30,.95);
  backdrop-filter: blur(20px);
  border-right: 1px solid var(--glass-border);
  padding: 20px;
  transition: .3s ease;
  z-index: 2000;
}

.sidebar.active {
  left: 0;
}

.sidebar h5 {
  font-family: Montserrat;
  font-weight: 800;
  margin-bottom: 20px;
}

.sidebar a {
  display: block;
  padding: 12px 14px;
  border-radius: 12px;
  margin-bottom: 8px;
  color: var(--text-main);
  text-decoration: none;
  background: rgba(255,255,255,.06);
  transition: .2s;
}

.sidebar a:hover {
  background: var(--primary);
  color: #fff;
}

.sidebar .wallet {
  background: linear-gradient(135deg,#00ffd5,#00c9a7);
  color: #000;
  font-weight: 700;
  margin-bottom: 18px;
}

/* OVERLAY */
.sidebar-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.6);
  display: none;
  z-index: 1500;
}

.sidebar-overlay.active {
  display: block;
}

/* MAIN */
.main-container {
  max-width: 1200px;
  margin: auto;
  padding: 24px 16px;
}

/* FLASH */
.alert {
  border-radius: 14px;
  background: rgba(255,255,255,.08);
  border: 1px solid var(--glass-border);
  color: white;
}
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar" id="sidebar">
  <h5>BANNER HUB</h5>

  {% if current_user.is_authenticated %}
    <div class="wallet text-center mb-3 p-2 rounded">
      ðŸ’° â‚¹{{ "%.2f"|format(current_user.wallet_balance) }}
    </div>

    {% if current_user.is_admin %}
      <a href="{{ url_for('admin_templates') }}">Admin</a>
      <a href="{{ url_for('admin_referrals') }}">Referrals</a>
    {% endif %}

    <a href="{{ url_for('wallet') }}">Wallet</a>
    <a href="{{ url_for('logout') }}" class="text-danger">Logout</a>
  {% endif %}
</div>

<div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

<!-- NAVBAR -->
<nav class="navbar navbar-dark sticky-top">
  <div class="container-fluid px-3">
    <button class="btn btn-outline-light me-2" onclick="toggleSidebar()">â˜°</button>

    <a class="navbar-brand d-flex align-items-center" href="{{ url_for('index') }}">
      <img src="{{ url_for('static', filename='logo.png') }}" style="height:34px" class="me-2">
      <span style="font-family:Montserrat;font-weight:800">BANNER HUB</span>
    </a>
  </div>
</nav>

<!-- FLASH -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="main-container">
      {% for cat,msg in messages %}
        <div class="alert alert-{{cat}}">{{ msg }}</div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

{% block content %}{% endblock %}

<script>
function toggleSidebar() {
  document.getElementById("sidebar").classList.toggle("active");
  document.getElementById("sidebarOverlay").classList.toggle("active");
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% block extra_js %}{% endblock %}
</body>
</html>

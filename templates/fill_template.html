{% extends "base.html" %}

{% block title %}Fill Template â€” {{ template.name }}{% endblock %}

{% block extra_css %}
<style>
    .field-card {
        background: rgba(255,255,255,0.06);
        padding: 18px;
        border-radius: 12px;
        margin-bottom: 18px;
        backdrop-filter: blur(10px);
    }

    label {
        font-weight: 600;
        color: #ddd;
        margin-bottom: 6px;
    }

    input[type="text"],
    input[type="file"],
    input[type="number"] {
        width: 100%;
        background: rgba(255,255,255,0.15);
        color: #fff;
        border: none;
        padding: 10px;
        border-radius: 8px;
        margin-bottom: 12px;
    }

    input::placeholder {
        color: #ccc;
    }

    .submit-btn {
        width: 100%;
        padding: 13px;
        border-radius: 10px;
        border: none;
        background: #007bff;
        color: #fff;
        font-weight: 600;
        font-size: 18px;
        transition: 0.25s;
    }

    .submit-btn:hover {
        background: #0a5fd0;
    }

    .image-preview {
        margin-top: 8px;
        width: 120px;
        height: 120px;
        object-fit: cover;
        border-radius: 10px;
        border: 2px solid rgba(255,255,255,0.2);
        display: none;
    }
</style>
{% endblock %}


{% block content %}

<div class="container py-4">

    <h2 class="text-center mb-4">{{ template.name }}</h2>

    <form action="{{ url_for('fill_template', template_id=template.id) }}" method="POST" enctype="multipart/form-data">

        {% for f in fields %}
        <div class="field-card">

            <label>{{ f.field_name|capitalize }}</label>

            {% if f.field_type == "text" %}
                <input type="text"
                       name="{{ f.field_name }}"
                       placeholder="Enter {{ f.field_name }}"
                       required>

            {% elif f.field_type == "image" %}
                <input type="file"
                       name="{{ f.field_name }}"
                       accept="image/*"
                       onchange="previewImage(event, '{{ f.field_name }}')">

                <img id="preview_{{ f.field_name }}" class="image-preview">
            {% endif %}

        </div>
        {% endfor %}

        <button type="submit" class="submit-btn">Continue to Preview</button>

    </form>
</div>


{% block extra_js %}
<script>
function previewImage(event, fieldName) {
    const img = document.getElementById("preview_" + fieldName);
    img.src = URL.createObjectURL(event.target.files[0]);
    img.style.display = "block";
}
</script>
{% endblock %}

{% endblock %}

